<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 4.1.2"/><title data-react-helmet="true">苍微的网络空间</title><script data-react-helmet="true" src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script><link href="https://fonts.googleapis.com/css?family=Alegreya|Josefin+Sans|Noto+Sans+SC&amp;display=swap" rel="stylesheet"/><link as="script" rel="preload" href="/blog/webpack-runtime-2b3b9d92457287d705b2.js"/><link as="script" rel="preload" href="/blog/framework-677ef9cabc7b780c813c.js"/><link as="script" rel="preload" href="/blog/app-fe12de62c9418c57776b.js"/><link as="script" rel="preload" href="/blog/d420273aaa69b3f7bf3f59d670c890ce495f01ee-14ad0fae049e4362617c.js"/><link as="script" rel="preload" href="/blog/component---src-templates-post-template-tsx-014621e1ab5e2633d7d6.js"/><link as="fetch" rel="preload" href="/blog/page-data/articles/2021/gatsby-start/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/blog/page-data/sq/d/2744905544.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/blog/page-data/app-data.json" crossorigin="anonymous"/></head><body><script>(function() { try {
  var mode = localStorage.getItem('theme-ui-color-mode');
  if (!mode) return
  document.documentElement.classList.add('theme-ui-' + mode);
} catch (e) {} })();</script><div id="___gatsby"><style data-emotion="css-global 1gjl5dc">html{--theme-ui-colors-background:#fff;--theme-ui-colors-text:#333;--theme-ui-colors-primary:#7397ab;--theme-ui-colors-secondary:#a29b7c;--theme-ui-colors-muted:#d1d9e0;color:var(--theme-ui-colors-text);background-color:var(--theme-ui-colors-background);}</style><style data-emotion="css-global u619ax">*{box-sizing:border-box;}html{font-family:'Alegreya','Songti SC',serif;font-size:16px;font-weight:normal;line-height:1.5;}body{margin:0;}</style><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion="css 1oe6clb">.css-1oe6clb{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;min-height:100vh;color:#333;}</style><div class="css-1oe6clb"><style data-emotion="css 17v9p0h">.css-17v9p0h{height:96px;background-color:var(--theme-ui-colors-muted);}</style><header class="css-17v9p0h"><style data-emotion="css 1l7fge8">.css-1l7fge8{height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><style data-emotion="css 1sbdmol">.css-1sbdmol{box-sizing:border-box;margin:0;min-width:0;width:100%;max-width:768px;margin-left:auto;margin-right:auto;height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><div class="css-1sbdmol"><style data-emotion="css 1ljbl34">.css-1ljbl34{width:129px;height:62px;background-image:url(/blog/assets/logo2.png);-webkit-background-size:contain;background-size:contain;}</style><a class="css-1ljbl34" href="/blog/"></a><style data-emotion="css 4cffwv">.css-4cffwv{box-sizing:border-box;margin:0;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}</style><nav class="css-4cffwv"><style data-emotion="css ehvp19">.css-ehvp19{box-sizing:border-box;margin:0;min-width:0;color:inherit;-webkit-text-decoration:none;text-decoration:none;font-weight:bold;display:inline-block;}.css-ehvp19:hover,.css-ehvp19:focus,.css-ehvp19.active{color:var(--theme-ui-colors-primary);}</style><a href="/blog/articles" class="css-ehvp19"><style data-emotion="css 1afoiqd">.css-1afoiqd{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><style data-emotion="css a6j143">.css-a6j143{box-sizing:border-box;margin:0;min-width:0;padding:12px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><div class="css-a6j143"><svg version="1.1" width="32" height="32" viewBox="0 0 32 32"><title>pen</title><path d="M31.818 9.122l-8.939-8.939c-0.292-0.292-0.676-0.226-0.855 0.146l-1.199 2.497 8.35 8.35 2.497-1.199c0.372-0.178 0.438-0.563 0.146-0.855z" fill="currentColor"></path><path d="M19.231 4.231l-8.231 0.686c-0.547 0.068-1.002 0.184-1.159 0.899-0 0.001-0 0.001-0.001 0.002-2.232 10.721-9.84 21.183-9.84 21.183l1.793 1.793 8.5-8.5c-0.187-0.392-0.293-0.83-0.293-1.293 0-1.657 1.343-3 3-3s3 1.343 3 3-1.343 3-3 3c-0.463 0-0.902-0.105-1.293-0.293l-8.5 8.5 1.793 1.793c0 0 10.462-7.608 21.183-9.84 0.001-0 0.001-0 0.002-0.001 0.714-0.157 0.831-0.612 0.898-1.159l0.686-8.231-8.538-8.539z" fill="currentColor"></path></svg><span>Articles</span></div></a><a href="/blog/about" class="css-ehvp19"><div class="css-a6j143"><svg version="1.1" width="32" height="32" viewBox="0 0 32 32"><title>user</title><path d="M18 22.082v-1.649c2.203-1.241 4-4.337 4-7.432 0-4.971 0-9-6-9s-6 4.029-6 9c0 3.096 1.797 6.191 4 7.432v1.649c-6.784 0.555-12 3.888-12 7.918h28c0-4.030-5.216-7.364-12-7.918z" fill="currentColor"></path></svg><span>About</span></div></a></nav></div></header><style data-emotion="css xnsvr3">.css-xnsvr3{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;}</style><main class="css-xnsvr3"><style data-emotion="css 1tert80">.css-1tert80{box-sizing:border-box;margin:0;min-width:0;width:100%;max-width:768px;margin-left:auto;margin-right:auto;padding-top:48px;padding-bottom:48px;}</style><div class="css-1tert80"><style data-emotion="css 6fm9if">.css-6fm9if{text-align:center;}</style><style data-emotion="css yzejrq">.css-yzejrq{padding:0;margin:0;margin-bottom:24px;font-size:32px;font-family:'Josefin Sans','Noto Sans SC',sans-serif;line-height:1.1;font-weight:bold;text-align:center;}</style><h1 class="css-yzejrq">Gatsby 入门指南</h1><style data-emotion="css 1qt0zfa">.css-1qt0zfa{padding:0;margin:0;margin-bottom:24px;}</style><p class="css-1qt0zfa">对于想要构建个人网站的开发者来说，使用 <style data-emotion="css 1xfcqgg">.css-1xfcqgg{color:var(--theme-ui-colors-primary);}</style><a href="https://www.gatsbyjs.com/" class="css-1xfcqgg">Gatsby</a> 是一个比较好的选择。当然还有其他优秀的网站生成工具，可以在这里找到：<a href="https://jamstack.org/generators/" class="css-1xfcqgg">https://jamstack.org/generators/</a>。其中我还尝试过 <a href="https://jekyllrb.com/" class="css-1xfcqgg">Jekyll</a>、<a href="https://hexo.io/" class="css-1xfcqgg">Hexo</a>，他们被称作静态网站生成器（static website generator），通常被用来生成博客（Blog）网站，开发者可以在项目中按 markdown 格式编辑好文章（.md 文件），然后里面的构建工具将这些文件转换成静态网页（.html 文件）。</p><p class="css-1qt0zfa">我之所以最终选择了 Gatsby，是出于以下几点考虑</p><style data-emotion="css 1n95rpb">.css-1n95rpb{padding:0;margin:0;margin-bottom:24px;list-style-position:outside;list-style-image:none;margin-left:24px;}</style><ol class="css-1n95rpb"><style data-emotion="css x73jvw">.css-x73jvw{margin-bottom:12px;padding-left:0;}.css-x73jvw ol{margin-top:12px;margin-bottom:12px;margin-left:24px;}.css-x73jvw ul{margin-top:12px;margin-bottom:12px;margin-left:24px;}.css-x73jvw p{margin-bottom:12px;}</style><li class="css-x73jvw">我是一名前端开发工程师，倾向基于 Javascript 的工具</li><li class="css-x73jvw">目前我对 React 使用较多，倾向基于 React 的工具</li><li class="css-x73jvw">Gatsby 里使用了 GraphQL，抱着学习的态度，我想要继续尝试</li><li class="css-x73jvw">Gatsby 有着丰富好用的插件，可以按照自己的需求自由组合，灵活搭建</li></ol><p class="css-1qt0zfa">目前 Gatsby 的官方文档还没有中文版本，内容虽然丰富，但是我体验下来，感觉组织庞杂，稍显混乱。曾多次试图从文档中寻找解答，都花费了比较多的时间，也可能是因为自己英文阅读功底不够。总之，就决定把使用经验总结一下，方便今后查阅，这是这篇指南的初衷。</p><style data-emotion="css cyqhly">.css-cyqhly{padding:0;margin:0;margin-bottom:24px;font-size:24.251465064166368px;font-family:'Josefin Sans','Noto Sans SC',sans-serif;line-height:1.1;font-weight:bold;}</style><h2 class="css-cyqhly">开始使用</h2><p class="css-1qt0zfa">可从以下两种方式入手：</p><ul class="css-1n95rpb"><li class="css-x73jvw">挑选模板生成</li><li class="css-x73jvw">自行按需安装</li></ul><style data-emotion="css 56xfqm">.css-56xfqm{padding:0;margin:0;margin-bottom:24px;font-size:21.112126572366307px;font-family:'Josefin Sans','Noto Sans SC',sans-serif;line-height:1.1;font-weight:bold;}</style><h3 class="css-56xfqm">挑选模板生成</h3><p class="css-1qt0zfa"><a href="(https://www.gatsbyjs.com/docs/reference/gatsby-cli/)" class="css-1xfcqgg">Gatsby CLI</a> + <a href="https://www.gatsbyjs.com/docs/how-to/local-development/starters/" class="css-1xfcqgg">Starter</a> 即可搭好项目。步骤如下：</p><ol class="css-1n95rpb"><li class="css-x73jvw">打开 <a href="https://www.gatsbyjs.com/starters/?v=2" class="css-1xfcqgg">Starter 市场</a> 挑选模板</li><li class="css-x73jvw">安装 CLI：<code class="css-0">npm i -g gatsby-cli</code></li><li class="css-x73jvw">生成项目：<code class="css-0">gatsby new {your-project-name} {link-to-starter}</code></li></ol><p class="css-1qt0zfa">不妨进入 Starter 市场看看，便能明白。</p><p class="css-1qt0zfa">推荐几个我喜欢的：</p><style data-emotion="css jfa9dz">.css-jfa9dz{padding:0;margin:0;margin-bottom:24px;font-size:16px;font-family:'Josefin Sans','Noto Sans SC',sans-serif;line-height:1.1;font-weight:bold;}</style><h4 class="css-jfa9dz">1. <a href="https://www.gatsbyjs.com/starters/gatsbyjs/gatsby-starter-blog/" class="css-1xfcqgg">gatsby-starter-blog</a></h4><p class="css-1qt0zfa"><style data-emotion="css 18lai4t">.css-18lai4t{padding:0;margin:0;margin-bottom:24px;max-width:100%;}</style><img src="https://www.gatsbyjs.com/static/0e2cc8c09f8ba56fc8577df9c589c431/54967/3576b917c4111516bdfc044ec7465d09.png" alt="gatsby-starter-blog" class="css-18lai4t"/></p><h4 class="css-jfa9dz">2. <a href="https://www.gatsbyjs.com/starters/greglobinski/gatsby-starter-personal-blog/" class="css-1xfcqgg">gatsby-starter-personal-blog</a></h4><p class="css-1qt0zfa"><img src="https://www.gatsbyjs.com/static/f711962897bdda482c311b31597b22ff/54967/e8db43d9ac6b90ddb001a918b4b0962e.png" alt="gatsby-starter-personal-blog" class="css-18lai4t"/></p><h4 class="css-jfa9dz">3. <a href="https://github.com/junhobaik/junhobaik.github.io" class="css-1xfcqgg">junhobaik.github.io</a></h4><p class="css-1qt0zfa">第 3 个是从 github 上找的，如果 Starter 市场上没有找到满意的，可以试着在 github 上搜索一下。</p><p class="css-1qt0zfa">使用模板生成项目一步到位、相当快捷，但是可能有以下缺陷：</p><ol class="css-1n95rpb"><li class="css-x73jvw">绝大多数是英文模板，换成中文效果不好</li><li class="css-x73jvw">进一步定制外观，会破坏原有视觉设计</li><li class="css-x73jvw">存在不需要的功能，移除比较费事</li><li class="css-x73jvw">依赖的工具版本过时，升级会碰到阻碍</li></ol><p class="css-1qt0zfa">如果追求省事儿、快速，并且对定制没有过多要求，推荐采用这种方式</p><h3 class="css-56xfqm">自行按需安装</h3><p class="css-1qt0zfa">因为我对定制要求较高，又期望对用到的工具能够有详细的了解，最终选择这种方式。</p><p class="css-1qt0zfa">可以从原始的 Starter 开始搭建，也可以从空目录开始。</p><h4 class="css-jfa9dz">原始 Starter</h4><p class="css-1qt0zfa">严格来说也是用模板生成的方式，但这里强调项目内容原始，包括很少的依赖，和仅用于提供指导的页面，方便自行定制。推荐两个：</p><ol class="css-1n95rpb"><li class="css-x73jvw"><a href="https://www.gatsbyjs.com/starters/gatsbyjs/gatsby-starter-hello-world/" class="css-1xfcqgg">gatsby-starter-hello-world</a></li><li class="css-x73jvw"><a href="https://www.gatsbyjs.com/starters/gatsbyjs/gatsby-starter-default/" class="css-1xfcqgg">gatsby-starter-default</a></li></ol><p class="css-1qt0zfa">它们预装的依赖如下：</p><style data-emotion="css 8as9jh">.css-8as9jh{padding:24px;margin:0;margin-bottom:24px;font-size:85%;overflow:auto;}.css-8as9jh code{font-family:Consolas,Monaco,monospace;}</style><pre class="prism-code language-json css-8as9jh" style="color:#9CDCFE;background-color:#1E1E1E"><code class="language-json"><div class="token-line" style="color:#9CDCFE"><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token property">&quot;gatsby&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;^2.26.1&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token property">&quot;react&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;^16.12.0&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token property">&quot;react-dom&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;^16.12.0&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span></div></code></pre><pre class="prism-code language-json css-8as9jh" style="color:#9CDCFE;background-color:#1E1E1E"><code class="language-json"><div class="token-line" style="color:#9CDCFE"><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token property">&quot;gatsby&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;^2.26.1&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token property">&quot;gatsby-image&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;^2.5.0&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token property">&quot;gatsby-plugin-manifest&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;^2.6.1&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token property">&quot;gatsby-plugin-offline&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;^3.4.0&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token property">&quot;gatsby-plugin-react-helmet&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;^3.4.0&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token property">&quot;gatsby-plugin-sharp&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;^2.8.0&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token property">&quot;gatsby-source-filesystem&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;^2.5.0&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token property">&quot;gatsby-transformer-sharp&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;^2.6.0&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token property">&quot;prop-types&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;^15.7.2&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token property">&quot;react&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;^16.12.0&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token property">&quot;react-dom&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;^16.12.0&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token property">&quot;react-helmet&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;^6.1.0&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span></div></code></pre><h4 class="css-jfa9dz">空目录开始</h4><p class="css-1qt0zfa">得到的项目和 gatsby-starter-hello-world 基本一致：</p><ol class="css-1n95rpb"><li class="css-x73jvw">新建目录，例：<code class="css-0">mkdir blog</code></li><li class="css-x73jvw">生成 package.json ：<code class="css-0">cd blog &amp;&amp; npm init -y</code></li><li class="css-x73jvw">安装依赖 ：<code class="css-0">npm i react react-dom gatsby</code></li></ol><h4 class="css-jfa9dz">添加页面</h4><p class="css-1qt0zfa">页面必须放置在 <code class="css-0">src/pages</code> 目录下，通常 <code class="css-0">index.js</code> （首页） 和 <code class="css-0">404.js</code>（404 not found） 是需要的。</p><p class="css-1qt0zfa">往 package.json 中添加脚本命令</p><pre class="prism-code language-json css-8as9jh" style="color:#9CDCFE;background-color:#1E1E1E"><code class="language-json"><div class="token-line" style="color:#9CDCFE"><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token property">&quot;scripts&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token property">&quot;start&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;gatsby develop&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token property">&quot;build&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;gatsby build&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span></div></code></pre><p class="css-1qt0zfa">至此，运行 <code class="css-0">npm start</code> 启动即可按提示查看页面效果</p><h3 class="css-56xfqm">部署</h3><p class="css-1qt0zfa">这里讲述如何部署到 <a href="https://pages.github.com/" class="css-1xfcqgg">GitHub Pages</a>。</p><p class="css-1qt0zfa">参考官方文档提供的指导：<a href="https://www.gatsbyjs.com/docs/how-to/previews-deploys-hosting/how-gatsby-works-with-github-pages/" class="css-1xfcqgg">How Gatsby Works with GitHub Pages</a></p><p class="css-1qt0zfa">总结整个过程就是：</p><ol class="css-1n95rpb"><li class="css-x73jvw">前往 github 项目仓库，找到并做好 GitHub Pages 相关配置</li><li class="css-x73jvw">安装 gh-pages 工具，并且添加 deploy 脚本命令到 package.json</li></ol><pre class="prism-code language-shell css-8as9jh" style="color:#9CDCFE;background-color:#1E1E1E"><code class="language-shell"><div class="token-line" style="color:#9CDCFE"><span class="token plain">gatsby build --prefix-paths </span><span class="token operator" style="color:rgb(212, 212, 212)">&amp;&amp;</span><span class="token plain"> gh-pages -d public</span></div></code></pre><p class="css-1qt0zfa">很轻松，说一下 gh-pages 工具的原理，就是先在本地构建好需要发布的文件，然后 gh-pages 工具按指定目录将文件提交到 gh-pages 分支，再推送到远程 github 仓库上罢了。此外不多赘述。</p><h3 class="css-56xfqm">样式</h3><p class="css-1qt0zfa">Gatsby 文档提供的指导：<a href="https://www.gatsbyjs.com/docs/how-to/styling/" class="css-1xfcqgg">Styling</a></p><p class="css-1qt0zfa">上面列出了许多方案。考虑到以后想要方便切换主题，这里我选择了使用 <a href="https://www.gatsbyjs.com/docs/how-to/styling/theme-ui/" class="css-1xfcqgg">Theme UI</a></p><p class="css-1qt0zfa">Theme UI 就是在一个文件中（<code class="css-0">gatsby-plugin-theme-ui</code>）定义好一些样式变量，然后可以在组件文件中使用这些变量。它的官方文档提供了一些指导：<a href="https://theme-ui.com/recipes" class="css-1xfcqgg">Theme UI Recipes</a>，可以参考它们搭建最基本的初始样式。</p><h2 class="css-cyqhly">文章页</h2><p class="css-1qt0zfa">Markdown 语法简介，当今也被广泛地用于编辑文章内容。Gatsby 可以很方便地将 markdown 文章转化成页面，需要用到 <code class="css-0">gatsby-source-filesystem</code> 和 <code class="css-0">gatsby-transformer-remark</code> 页面。前者能够将文件解析成文件对象（ graphql 查询中的 file 节点），后者进一步将 markdown 文件内容转换成 html 内容，并生成特定的 markdown 数据对象（ graphql 查询中的 markdownRemark 节点）。</p><p class="css-1qt0zfa">对比安装前后的 graphql 查询节点如下：</p><p class="css-1qt0zfa"><img src="/assets/query_default.png" alt="query default" class="css-18lai4t"/></p><p class="css-1qt0zfa"><img src="/assets/query_markdown.png" alt="query markdown" class="css-18lai4t"/></p><p class="css-1qt0zfa">参考文档： <a href="https://www.gatsbyjs.com/docs/how-to/routing/adding-markdown-pages/" class="css-1xfcqgg">Adding Markdown Pages</a></p><p class="css-1qt0zfa">总结过程含 3 步：</p><ol class="css-1n95rpb"><li class="css-x73jvw">安装插件，并在 <code class="css-0">gatsby-config.js</code> 中做好配置</li><li class="css-x73jvw">添加文章，定义好文章头（ frontmatter ）</li><li class="css-x73jvw">在 <code class="css-0">gatsby-node.js</code> 文件中定义好文章生成逻辑（ <code class="css-0">createPages</code> 函数）</li></ol><p class="css-1qt0zfa">可以使用 Hexo 的测试文章来测试效果：<a href="https://github.com/hexojs/hexo-theme-unit-test" class="css-1xfcqgg">https://github.com/hexojs/hexo-theme-unit-test</a></p><h3 class="css-56xfqm">PrismJS</h3><p class="css-1qt0zfa">技术分享类的博客网站，通常会涉及到许多代码内容，使用 <a href="http://prismjs.com/" class="css-1xfcqgg">PrismJS</a> 将会得到非常美观的代码样式： <a href="https://www.gatsbyjs.com/plugins/gatsby-remark-prismjs/" class="css-1xfcqgg">gatsby-remark-prismjs</a></p><p class="css-1qt0zfa">配置相当简单：</p><pre class="prism-code language-js css-8as9jh" style="color:#9CDCFE;background-color:#1E1E1E"><code class="language-js"><div class="token-line" style="color:#9CDCFE"><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">   resolve</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:rgb(206, 145, 120)">`</span><span class="token template-string string" style="color:rgb(206, 145, 120)">gatsby-transformer-remark</span><span class="token template-string template-punctuation string" style="color:rgb(206, 145, 120)">`</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">   options</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">     plugins</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token template-string template-punctuation string" style="color:rgb(206, 145, 120)">`</span><span class="token template-string string" style="color:rgb(206, 145, 120)">gatsby-remark-prismjs</span><span class="token template-string template-punctuation string" style="color:rgb(206, 145, 120)">`</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">   </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span></div></code></pre><p class="css-1qt0zfa">它能够给代码块内容添加上特定的类名。</p><p class="css-1qt0zfa">然后在 <code class="css-0">gatsby-node.js</code> 文件中引入想要的样式即可</p><pre class="prism-code language-js css-8as9jh" style="color:#9CDCFE;background-color:#1E1E1E"><code class="language-js"><div class="token-line" style="color:#9CDCFE"><span class="token keyword module" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;prismjs/themes/prism.css&quot;</span></div></code></pre><h2 class="css-cyqhly">结语</h2><p class="css-1qt0zfa">至此已经具备一个博客网站的雏形，入门所需就介绍到这里，往后可以继续探索更多细节。</p></div></main><style data-emotion="css z5tx3b">.css-z5tx3b{width:100%;text-align:center;font-size:12px;}</style><footer class="css-z5tx3b"><p>Copyright © <!-- -->2021<!-- --> qubitsky. All Rights Reserved. 苍微q 版权所有</p></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/articles/2021/gatsby-start";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-d69664561c90ab43065f.js"],"app":["/app-fe12de62c9418c57776b.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-64e232b04298a08f821b.js"],"component---src-pages-about-tsx":["/component---src-pages-about-tsx-952fc6b9883ac05e43db.js"],"component---src-pages-articles-tsx":["/component---src-pages-articles-tsx-c9603d75175c29fcaecc.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-2e2e47e5a1596f1ee1fa.js"],"component---src-templates-post-template-tsx":["/component---src-templates-post-template-tsx-014621e1ab5e2633d7d6.js"]};/*]]>*/</script><script src="/blog/polyfill-d69664561c90ab43065f.js" nomodule=""></script><script src="/blog/component---src-templates-post-template-tsx-014621e1ab5e2633d7d6.js" async=""></script><script src="/blog/d420273aaa69b3f7bf3f59d670c890ce495f01ee-14ad0fae049e4362617c.js" async=""></script><script src="/blog/app-fe12de62c9418c57776b.js" async=""></script><script src="/blog/framework-677ef9cabc7b780c813c.js" async=""></script><script src="/blog/webpack-runtime-2b3b9d92457287d705b2.js" async=""></script></body></html>