<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/blog/styles.824667e0957a8bed2614.css" id="gatsby-global-css">/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}[hidden],template{display:none}.loading{display:inline-block;overflow:hidden;height:1.3em;margin-top:-.3em;line-height:1.5em;vertical-align:text-bottom}.loading:after{display:inline-table;white-space:pre;text-align:left;content:"\A.\A..\A...";animation:spin4 2s steps(4) infinite}.loading.line:after{content:"/\A\2013\A\\\A|"}.loading.line2:after,.loading.line:after{text-align:center;animation:spin4 1s steps(4) infinite}.loading.line2:after{content:"\2572\A\2502\A\2571\A\2500"}.loading.plus:after{content:"\253D\A\2540\A\253E\A\2541";animation:spin4 1s steps(4) infinite}.loading.dots:after{content:"\280B\A\2819\A\2839\A\2838\A\283C\A\2834\A\2826\A\2827\A\2807\A\280F";animation:spin10 1s steps(10) infinite}.loading.dots2:after{content:"\280B\A\2819\A\281A\A\281E\A\2816\A\2826\A\2834\A\2832\A\2833";animation:spin9 1s steps(9) infinite}.loading.dots3:after{content:"\22EE\A\22F0\A\22EF\A\22F1";text-align:center;animation:spin4 1s steps(4) infinite}.loading.lifting:after{content:"\A708\A70D\A\A709\A70E\A\A70A\A70F\A\A70B\A710\A\A70C\A711";animation:spin5 .5s steps(5) infinite alternate}.loading.hamburger:after{content:"\2631\A\2632\A\2634";animation:spin3 .3s steps(3) infinite alternate}.loading.bar:after{content:"\258F\A\258E\A\258D\A\258C\A\258B\A\258A\A\2589";animation:spin7 1s steps(7) infinite alternate}.loading.bar2:after{content:"\2581\A\2582\A\2583\A\2584\A\2585\A\2586\A\2587\A\2588";animation:spin8 2s steps(8) infinite alternate}.loading.circle:after{content:"\25F4\A\25F7\A\25F6\A\25F5";animation:spin4 1s steps(4) infinite}.loading.open-circle:after{content:"\25DC\A\25E0\A\25DD\A\25DE\A\25E1\A\25DF";animation:spin6 .6s steps(6) infinite}.loading.arrow:after{content:"\2190\A\2196\A\2191\A\2197\A\2192\A\2198\A\2193\A\2199";animation:spin8 1s steps(8) infinite}.loading.triangle:after{content:"\25E2\A\25E3\A\25E4\A\25E5";animation:spin4 1s steps(4) infinite}.loading.triangles:after{content:"\25B9\25B9\25B9\25B9\25B9\A   \25B8\25B9\25B9\25B9\25B9\A   \25B9\25B8\25B9\25B9\25B9\A   \25B9\25B9\25B8\25B9\25B9\A   \25B9\25B9\25B9\25B8\25B9\A   \25B9\25B9\25B9\25B9\25B8";animation:spin6 1s steps(6) infinite}.loading.beam:after{content:"\A=   \A   ==  \A   === \A   ====\A    ===\A     ==\A      =\A";animation:spin9 1.2s steps(9) infinite;font-family:monospace}.loading.bullet:after{content:" \25CF      \A     \25CF     \A      \25CF    \A       \25CF   \A        \25CF\A       \25CF   \A      \25CF    \A     \25CF     \A    \25CF      \A   \25CF       ";animation:spin10 1s steps(10) infinite}.loading.bullseye:after{content:"\25CE\25CE\25CE\A\25C9\25CE\25CE\A\25CE\25C9\25CE\A\25CE\25CE\25C9";animation:spin4 1s steps(4) infinite}.loading.rhomb:after{content:"\25C7\25C7\25C7\A\25C8\25C7\25C7\A\25C7\25C8\25C7\A\25C7\25C7\25C8";animation:spin4 1s steps(4) infinite}.loading.fish:after{content:">))'>\A   \2003>))'>\A   \2003\2003>))'>\A   \2003\2003\2003>))'>\A   \2003\2003\2003\2003>))'>\A   \2003\2003\2003\2003<'((<\A   \2003\2003\2003<'((<\A   \2003\2003<'((<\A   \2003<'((<\A   <'((<\A";animation:spin10 5s steps(10) infinite}.loading.toggle:after{content:"\22B6\A\22B7";animation:spin2 1s steps(2) infinite}.loading.countdown:after{content:"0\A   1\A   2\A   3\A   4\A   5\A   6\A   7\A   8\A   9";animation:spin10 10s steps(10) reverse}.loading.time:after{content:"\1F550\A\1F551\A\1F552\A\1F553\A\1F554\A\1F555\A\1F556\A\1F557\A\1F558\A\1F559\A\1F55A\A\1F55B";animation:spin12 3s steps(12) infinite;width:1.3em}.loading.hearts:after{content:"\1F49B\A\1F499\A\1F49C\A\1F49A";animation:spin4 2s steps(4) infinite;width:1.3em}.loading.earth:after{content:"\1F30D\A\1F30E\A\1F30F";animation:spin3 1s steps(3) infinite;width:1.3em}.loading.moon:after{content:"\1F311\A\1F312\A\1F313\A\1F314\A\1F315\A\1F316\A\1F317\A\1F318";animation:spin8 2s steps(8) infinite;width:1.3em}.loading.monkey:after{content:"\1F648\A\1F649\A\1F64A";animation:spin3 1.5s steps(3) infinite;width:1.3em}.loading.runner:after{content:"\1F6B6\A\1F3C3";animation:spin2 1s steps(2) infinite;width:1.3em}.loading.box-bounce:after{content:"\2596\A\2598\A\259D\A\2597";animation:spin4 1s steps(4) infinite}.loading.star:after{content:"\2736\A\2738\A\2739\A\273A\A\2739\A\2737";animation:spin6 1s steps(6) infinite}.loading.matrix:after{content:"\2591   \2591\2591\2591\2591\A\2591\2591   \2591\2591\2591\A\2591\2591\2591   \2591\2591\A\2591\2591\2591\2591   \2591";animation:spin4 .5s steps(4) infinite alternate}.loading.square:after{content:"\25F0\A\25F3\A\25F2\A\25F1";animation:spin4 1s steps(4) infinite}.loading.words:after{content:"Loading\A   Still loading\A   Mostly done\A   A bit more \A   Almost done\A   Ready-ish";animation:spin6 12s steps(6) infinite}@keyframes spin1{to{transform:translateY(-1.5em)}}@keyframes spin2{to{transform:translateY(-3em)}}@keyframes spin3{to{transform:translateY(-4.5em)}}@keyframes spin4{to{transform:translateY(-6em)}}@keyframes spin5{to{transform:translateY(-7.5em)}}@keyframes spin6{to{transform:translateY(-9em)}}@keyframes spin7{to{transform:translateY(-10.5em)}}@keyframes spin8{to{transform:translateY(-12em)}}@keyframes spin9{to{transform:translateY(-13.5em)}}@keyframes spin10{to{transform:translateY(-15em)}}@keyframes spin11{to{transform:translateY(-16.5em)}}@keyframes spin12{to{transform:translateY(-18em)}}body,html{height:100%;margin:0;overflow:auto}body{font-family:Alegreya,Songti SC,serif;background-image:radial-gradient(circle at top left,#c3c3c3 0,#c3c3c3 2%,#cacaca 0,#cacaca 23%,#d1d1d1 0,#d1d1d1 55%,#d9d9d9 0,#d9d9d9 80%,#e0e0e0 0,#e0e0e0 86%,#e7e7e7 0,#e7e7e7 96%,#eee 0,#eee 100%)}img{max-width:100%}a{text-decoration:none}.loading{vertical-align:middle}code[class*=language-],pre[class*=language-]{color:#000;background:none;text-shadow:0 1px #fff;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style><meta name="generator" content="Gatsby 2.30.2"/><title data-react-helmet="true">苍微の城</title><link data-react-helmet="true" rel="preconnect" href="https://fonts.gstatic.com"/><link data-react-helmet="true" href="https://fonts.googleapis.com/css2?family=Alegreya&amp;display=swap" rel="stylesheet"/><script data-react-helmet="true" src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script><link as="script" rel="preload" href="/blog/webpack-runtime-771cea37be69d1b408a1.js"/><link as="script" rel="preload" href="/blog/framework-8aba4025690a031b46dc.js"/><link as="script" rel="preload" href="/blog/styles-755093da0c07f4b49226.js"/><link as="script" rel="preload" href="/blog/app-0766653bb2c6165aa6da.js"/><link as="script" rel="preload" href="/blog/ac9b263e6859eb38ca011eead2e9ed83c6f97330-9620dd86b93dce194923.js"/><link as="script" rel="preload" href="/blog/component---src-templates-post-template-tsx-3f01f9d7d16d06df5c7c.js"/><link as="fetch" rel="preload" href="/blog/page-data/articles/2021/gatsby-start/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/blog/page-data/app-data.json" crossorigin="anonymous"/></head><body><script>(function() { try {
  var mode = localStorage.getItem('theme-ui-color-mode');
  if (!mode) return
  document.body.classList.add('theme-ui-' + mode);
} catch (e) {} })();</script><div id="___gatsby"><style data-emotion-css="sa2dbt">body{color:text;background-color:var(--theme-ui-colors-background,#fff);}</style><style data-emotion-css="1d7m1w5">*{box-sizing:border-box;}body{margin:0;}</style><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion-css="zf0iqh">.css-zf0iqh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;min-height:100vh;}</style><div class="css-zf0iqh"><style data-emotion-css="k60m85">.css-k60m85{width:100%;-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;}</style><main class="css-k60m85"><style data-emotion-css="xi606m">.css-xi606m{text-align:center;}</style><h1 class="css-xi606m">Gatsby 入门指南</h1><style data-emotion-css="1rbk7tb">.css-1rbk7tb{max-width:768px;margin-left:auto;margin-right:auto;padding-left:16px;padding-right:16px;padding-top:32px;padding-bottom:32px;}</style><section class="css-1rbk7tb"><p>对于想要构建个人网站的开发者来说，使用 <a href="https://www.gatsbyjs.com/">Gatsby</a> 是一个比较好的选择。当然还有其他优秀的网站生成工具，可以在这里找到：<a href="https://jamstack.org/generators/">https://jamstack.org/generators/</a>。其中我还尝试过 <a href="https://jekyllrb.com/">Jekyll</a>、<a href="https://hexo.io/">Hexo</a>，他们被称作静态网站生成器（static website generator），通常被用来生成博客（Blog）网站，开发者可以在项目中按 markdown 格式编辑好文章（.md 文件），然后里面的构建工具将这些文件转换成静态网页（.html 文件）。</p>
<p>我之所以最终选择了 Gatsby，是出于以下几点考虑</p>
<ol>
<li>我是一名前端开发工程师，倾向基于 Javascript 的工具</li>
<li>目前我对 React 使用较多，倾向基于 React 的工具</li>
<li>Gatsby 里使用了 GraphQL，抱着学习的态度，我想要继续尝试</li>
<li>Gatsby 有着丰富好用的插件，可以按照自己的需求自由组合，灵活搭建</li>
</ol>
<p>目前 Gatsby 的官方文档还没有中文版本，内容虽然丰富，但是我体验下来，感觉组织庞杂，稍显混乱。曾多次试图从文档中寻找解答，都花费了比较多的时间，也可能是因为自己英文阅读功底不够。总之，就决定把使用经验总结一下，方便今后查阅，这是这篇指南的初衷。</p>
<h2>开始使用</h2>
<p>可从以下两种方式入手：</p>
<ul>
<li>挑选模板生成</li>
<li>自行按需安装</li>
</ul>
<h3>挑选模板生成</h3>
<p><a href="(https://www.gatsbyjs.com/docs/reference/gatsby-cli/)">Gatsby CLI</a> + <a href="https://www.gatsbyjs.com/docs/how-to/local-development/starters/">Starter</a> 即可搭好项目。步骤如下：</p>
<ol>
<li>打开 <a href="https://www.gatsbyjs.com/starters/?v=2">Starter 市场</a> 挑选模板</li>
<li>安装 CLI：<code class="language-text">npm i -g gatsby-cli</code></li>
<li>生成项目：<code class="language-text">gatsby new {your-project-name} {link-to-starter}</code></li>
</ol>
<p>不妨进入 Starter 市场看看，便能明白。</p>
<p>推荐几个我喜欢的：</p>
<h4>1. <a href="https://www.gatsbyjs.com/starters/gatsbyjs/gatsby-starter-blog/">gatsby-starter-blog</a></h4>
<p><img src="https://www.gatsbyjs.com/static/0e2cc8c09f8ba56fc8577df9c589c431/54967/3576b917c4111516bdfc044ec7465d09.png" alt="gatsby-starter-blog"></p>
<h4>2. <a href="https://www.gatsbyjs.com/starters/greglobinski/gatsby-starter-personal-blog/">gatsby-starter-personal-blog</a></h4>
<p><img src="https://www.gatsbyjs.com/static/f711962897bdda482c311b31597b22ff/54967/e8db43d9ac6b90ddb001a918b4b0962e.png" alt="gatsby-starter-personal-blog"></p>
<h4>3. <a href="https://github.com/junhobaik/junhobaik.github.io">junhobaik.github.io</a></h4>
<p>第 3 个是从 github 上找的，如果 Starter 市场上没有找到满意的，可以试着在 github 上搜索一下。</p>
<p>使用模板生成项目一步到位、相当快捷，但是可能有以下缺陷：</p>
<ol>
<li>绝大多数是英文模板，换成中文效果不好</li>
<li>进一步定制外观，会破坏原有视觉设计</li>
<li>存在不需要的功能，移除比较费事</li>
<li>依赖的工具版本过时，升级会碰到阻碍</li>
</ol>
<p>如果追求省事儿、快速，并且对定制没有过多要求，推荐采用这种方式</p>
<h3>自行按需安装</h3>
<p>因为我对定制要求较高，又期望对用到的工具能够有详细的了解，最终选择这种方式。</p>
<p>可以从原始的 Starter 开始搭建，也可以从空目录开始。</p>
<h4>原始 Starter</h4>
<p>严格来说也是用模板生成的方式，但这里强调项目内容原始，包括很少的依赖，和仅用于提供指导的页面，方便自行定制。推荐两个：</p>
<ol>
<li><a href="https://www.gatsbyjs.com/starters/gatsbyjs/gatsby-starter-hello-world/">gatsby-starter-hello-world</a></li>
<li><a href="https://www.gatsbyjs.com/starters/gatsbyjs/gatsby-starter-default/">gatsby-starter-default</a></li>
</ol>
<p>它们预装的依赖如下：</p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"gatsby"</span><span class="token operator">:</span> <span class="token string">"^2.26.1"</span><span class="token punctuation">,</span>
  <span class="token property">"react"</span><span class="token operator">:</span> <span class="token string">"^16.12.0"</span><span class="token punctuation">,</span>
  <span class="token property">"react-dom"</span><span class="token operator">:</span> <span class="token string">"^16.12.0"</span>
<span class="token punctuation">}</span></code></pre></div>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"gatsby"</span><span class="token operator">:</span> <span class="token string">"^2.26.1"</span><span class="token punctuation">,</span>
  <span class="token property">"gatsby-image"</span><span class="token operator">:</span> <span class="token string">"^2.5.0"</span><span class="token punctuation">,</span>
  <span class="token property">"gatsby-plugin-manifest"</span><span class="token operator">:</span> <span class="token string">"^2.6.1"</span><span class="token punctuation">,</span>
  <span class="token property">"gatsby-plugin-offline"</span><span class="token operator">:</span> <span class="token string">"^3.4.0"</span><span class="token punctuation">,</span>
  <span class="token property">"gatsby-plugin-react-helmet"</span><span class="token operator">:</span> <span class="token string">"^3.4.0"</span><span class="token punctuation">,</span>
  <span class="token property">"gatsby-plugin-sharp"</span><span class="token operator">:</span> <span class="token string">"^2.8.0"</span><span class="token punctuation">,</span>
  <span class="token property">"gatsby-source-filesystem"</span><span class="token operator">:</span> <span class="token string">"^2.5.0"</span><span class="token punctuation">,</span>
  <span class="token property">"gatsby-transformer-sharp"</span><span class="token operator">:</span> <span class="token string">"^2.6.0"</span><span class="token punctuation">,</span>
  <span class="token property">"prop-types"</span><span class="token operator">:</span> <span class="token string">"^15.7.2"</span><span class="token punctuation">,</span>
  <span class="token property">"react"</span><span class="token operator">:</span> <span class="token string">"^16.12.0"</span><span class="token punctuation">,</span>
  <span class="token property">"react-dom"</span><span class="token operator">:</span> <span class="token string">"^16.12.0"</span><span class="token punctuation">,</span>
  <span class="token property">"react-helmet"</span><span class="token operator">:</span> <span class="token string">"^6.1.0"</span>
<span class="token punctuation">}</span></code></pre></div>
<h4>空目录开始</h4>
<p>得到的项目和 gatsby-starter-hello-world 基本一致：</p>
<ol>
<li>新建目录，例：<code class="language-text">mkdir blog</code></li>
<li>生成 package.json ：<code class="language-text">cd blog &amp;&amp; npm init -y</code></li>
<li>安装依赖 ：<code class="language-text">npm i react react-dom gatsby</code></li>
</ol>
<h4>添加页面</h4>
<p>页面必须放置在 <code class="language-text">src/pages</code> 目录下，通常 <code class="language-text">index.js</code> （首页） 和 <code class="language-text">404.js</code>（404 not found） 是需要的。</p>
<p>往 package.json 中添加脚本命令</p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"start"</span><span class="token operator">:</span> <span class="token string">"gatsby develop"</span><span class="token punctuation">,</span>
    <span class="token property">"build"</span><span class="token operator">:</span> <span class="token string">"gatsby build"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>至此，运行 <code class="language-text">npm start</code> 启动即可按提示查看页面效果</p>
<h3>部署</h3>
<p>这里讲述如何部署到 <a href="https://pages.github.com/">GitHub Pages</a>。</p>
<p>参考官方文档提供的指导：<a href="https://www.gatsbyjs.com/docs/how-to/previews-deploys-hosting/how-gatsby-works-with-github-pages/">How Gatsby Works with GitHub Pages</a></p>
<p>总结整个过程就是：</p>
<ol>
<li>前往 github 项目仓库，找到并做好 GitHub Pages 相关配置</li>
<li>安装 gh-pages 工具，并且添加 deploy 脚本命令到 package.json</li>
</ol>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">gatsby build --prefix-paths <span class="token operator">&amp;&amp;</span> gh-pages -d public</code></pre></div>
<p>很轻松，说一下 gh-pages 工具的原理，就是先在本地构建好需要发布的文件，然后 gh-pages 工具按指定目录将文件提交到 gh-pages 分支，再推送到远程 github 仓库上罢了。此外不多赘述。</p>
<h3>样式</h3>
<p>Gatsby 文档提供的指导：<a href="https://www.gatsbyjs.com/docs/how-to/styling/">Styling</a></p>
<p>上面列出了许多方案。考虑到以后想要方便切换主题，这里我选择了使用 <a href="https://www.gatsbyjs.com/docs/how-to/styling/theme-ui/">Theme UI</a></p>
<p>Theme UI 就是在一个文件中（<code class="language-text">gatsby-plugin-theme-ui</code>）定义好一些样式变量，然后可以在组件文件中使用这些变量。它的官方文档提供了一些指导：<a href="https://theme-ui.com/recipes">Theme UI Recipes</a>，可以参考它们搭建最基本的初始样式。</p>
<h2>文章页</h2>
<p>Markdown 语法简介，当今也被广泛地用于编辑文章内容。Gatsby 可以很方便地将 markdown 文章转化成页面，需要用到 <code class="language-text">gatsby-source-filesystem</code> 和 <code class="language-text">gatsby-transformer-remark</code> 页面。前者能够将文件解析成文件对象（ graphql 查询中的 file 节点），后者进一步将 markdown 文件内容转换成 html 内容，并生成特定的 markdown 数据对象（ graphql 查询中的 markdownRemark 节点）。</p>
<p>对比安装前后的 graphql 查询节点如下：</p>
<p><img src="/assets/query_default.png" alt="query default"></p>
<p><img src="/assets/query_markdown.png" alt="query markdown"></p>
<p>参考文档： <a href="https://www.gatsbyjs.com/docs/how-to/routing/adding-markdown-pages/">Adding Markdown Pages</a></p>
<p>总结过程含 3 步：</p>
<ol>
<li>安装插件，并在 <code class="language-text">gatsby-config.js</code> 中做好配置</li>
<li>添加文章，定义好文章头（ frontmatter ）</li>
<li>在 <code class="language-text">gatsby-node.js</code> 文件中定义好文章生成逻辑（ <code class="language-text">createPages</code> 函数）</li>
</ol>
<p>可以使用 Hexo 的测试文章来测试效果：<a href="https://github.com/hexojs/hexo-theme-unit-test">https://github.com/hexojs/hexo-theme-unit-test</a></p>
<h3>PrismJS</h3>
<p>技术分享类的博客网站，通常会涉及到许多代码内容，使用 <a href="http://prismjs.com/">PrismJS</a> 将会得到非常美观的代码样式： <a href="https://www.gatsbyjs.com/plugins/gatsby-remark-prismjs/">gatsby-remark-prismjs</a></p>
<p>配置相当简单：</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token punctuation">{</span>
   resolve<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">gatsby-transformer-remark</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
   options<span class="token operator">:</span> <span class="token punctuation">{</span>
     plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">gatsby-remark-prismjs</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">]</span><span class="token punctuation">,</span>
   <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span></code></pre></div>
<p>它能够给代码块内容添加上特定的类名。</p>
<p>然后在 <code class="language-text">gatsby-node.js</code> 文件中引入想要的样式即可</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token string">"prismjs/themes/prism.css"</span></code></pre></div>
<h2>结语</h2>
<p>至此已经具备一个博客网站的雏形，入门所需就介绍到这里，往后可以继续探索更多细节。</p></section></main><style data-emotion-css="fzwid6">.css-fzwid6{width:100%;text-align:center;}</style><footer class="css-fzwid6"><p>Copyright © 2020 qubitsky. All Rights Reserved. 苍微q 版权所有</p></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/articles/2021/gatsby-start";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-89ac77d4b615b132cbdb.js"],"app":["/app-0766653bb2c6165aa6da.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-033d5d8e832eb6b52051.js"],"component---src-pages-articles-tsx":["/component---src-pages-articles-tsx-99d635f469c9c1864d95.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-a99312ba3317a253ff76.js"],"component---src-templates-post-template-tsx":["/component---src-templates-post-template-tsx-3f01f9d7d16d06df5c7c.js"]};/*]]>*/</script><script src="/blog/polyfill-89ac77d4b615b132cbdb.js" nomodule=""></script><script src="/blog/component---src-templates-post-template-tsx-3f01f9d7d16d06df5c7c.js" async=""></script><script src="/blog/ac9b263e6859eb38ca011eead2e9ed83c6f97330-9620dd86b93dce194923.js" async=""></script><script src="/blog/app-0766653bb2c6165aa6da.js" async=""></script><script src="/blog/styles-755093da0c07f4b49226.js" async=""></script><script src="/blog/framework-8aba4025690a031b46dc.js" async=""></script><script src="/blog/webpack-runtime-771cea37be69d1b408a1.js" async=""></script></body></html>